<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Edit User</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
	<div class="container mt-5">
		<h1 class="text-center mb-4">Chỉnh sửa User</h1>
		<div class="row justify-content-center">
			<div class="col-md-6">

				<form id="editUserForm" action="/update" method="post" th:object="${user}"
					onsubmit="return validateForm()">
					<div class="form-group">
						<label for="userId">User ID</label>
						<input type="text" class="form-control" id="userId" th:field="*{userId}" readonly>
					</div>
					<div class="form-group">
						<label for="password">Password</label>
						<input type="password" class="form-control" id="password" th:field="*{password}" required>
					</div>
					<div class="form-group">
						<label for="confirmPassword">Confirm Password</label>
						<input type="password" class="form-control" id="confirmPassword" required>
						<small id="passwordMismatch" class="form-text text-danger d-none">Xác nhận mật khẩu không
							khớp</small>
					</div>
					<div class="form-group">
						<label for="role">Role</label>
						<input type="text" class="form-control" id="role" th:field="*{role}" readonly>
					</div>
					<button type="submit" class="btn btn-primary ">Update</button>
					<button type="button" class="btn btn-success ml-3 " onclick="resetForm()">Reset</button>
					<a href="/manage_user" class="btn btn-danger " style="float: right;">Cancel</a>
				</form>
			</div>
		</div>
	</div>

	<script>
		function resetForm() {
			document.getElementById("editUserForm").reset();
			document.getElementById("passwordMismatch").classList.add("d-none");
		}

		function validateForm() {
			var password = document.getElementById("password").value;
			var confirmPassword = document.getElementById("confirmPassword").value;

			if (password !== confirmPassword) {
				document.getElementById("passwordMismatch").classList.remove("d-none");
				return false;
			} else {
				document.getElementById("passwordMismatch").classList.add("d-none");
				return true;
			}
		}
	</script>
</body>

</html>